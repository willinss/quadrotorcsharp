#include "filters.h"
  
  const float alpha = 0.98;
  int g_point = 0;
  float filterx[N];
  /*const float filterb[N] = {0.0005,0.0003,-0.0001,-0.0005,-0.0008,-0.0011,-0.0011,-0.0008,-0.0001,0.0009
  ,0.0019,0.0027,0.0029,0.0023,0.0008,-0.0015,-0.0040,-0.0060,-0.0068,-0.0059
  ,-0.0029,0.0018,0.0071,0.0117,0.0142,0.0131,0.0081,-0.0007,-0.0116,-0.0221
  ,-0.0293,-0.0302,-0.0224,-0.0050,0.0212,0.0535,0.0880,0.1198,0.1443,0.1576
  ,0.1576,0.1443,0.1198,0.0880,0.0535,0.0212,-0.0050,-0.0224,-0.0302,-0.0293
  ,-0.0221,-0.0116,-0.0007,0.0081,0.0131,0.0142,0.0117,0.0071,0.0018,-0.0029
  ,-0.0059,-0.0068,-0.0060,-0.0040,-0.0015,0.0008,0.0023,0.0029,0.0027,0.0019
  ,0.0009,-0.0001,-0.0008,-0.0011,-0.0011,-0.0008,-0.0005,-0.0001,0.0003,0.0005};
  */
  const float filterb[N] = {-0.0016,   -0.0019,   -0.0021,   -0.0022,   -0.0021,   -0.0016,   -0.0015,   -0.0013,   -0.0012,   -0.0011,   -0.0010,   -0.0009,   -0.0004,   -0.0004,   -0.0003,   -0.0004,   -0.0005,   -0.0007,   -0.0008,   -0.0007,   -0.0007,   -0.0010,   -0.0006,   -0.0006,   -0.0008,   -0.0008,   -0.0008,   -0.0010,   -0.0009,   -0.0011,   -0.0009,   -0.0008,   -0.0010,   -0.0008,   -0.0005,   -0.0002,   -0.0002,   -0.0000,   -0.0002,   -0.0001,   -0.0002,   -0.0001,   -0.0001,    0.0000,    0.0001,    0.0005,    0.0008,    0.0008,    0.0005,    0.0005,    0.0002,    0.0004,    0.0007,    0.0007,    0.0007,    0.0008,    0.0009,    0.0008,    0.0008,    0.0011,    0.0011,    0.0011,    0.0010,    0.0007,    0.0008,    0.0009,    0.0009,    0.0012,    0.0014,    0.0012,    0.0011,    0.0009,    0.0008,    0.0010,    0.0010,    0.0010,    0.0010,    0.0008,    0.0006,    0.0009};
  //const float filterb[N] = {-0.0010,   -0.0013,   -0.0016,   -0.0018,   -0.0019,   -0.0019,   -0.0018,   -0.0017,   -0.0014,   -0.0012,   -0.0009,   -0.0007,   -0.0006,   -0.0005,   -0.0004,   -0.0005,   -0.0005,   -0.0006,   -0.0006,   -0.0007,   -0.0007,   -0.0007,   -0.0008,   -0.0008,   -0.0008,   -0.0008,   -0.0009,   -0.0009,   -0.0009,   -0.0009,   -0.0009,   -0.0009,   -0.0008,   -0.0007,   -0.0006,   -0.0005,   -0.0004,   -0.0003,   -0.0002,   -0.0001,   -0.0001,    0.0000,    0.0001,    0.0002,    0.0002,    0.0003,    0.0004,    0.0004,    0.0005,    0.0005,    0.0005,    0.0006,    0.0006,    0.0006,    0.0007,    0.0007,    0.0008,    0.0008,    0.0009,    0.0009,    0.0010,    0.0010,    0.0010,    0.0010,    0.0010,    0.0010,    0.0010,    0.0010,    0.0010,    0.0011,    0.0011,    0.0011,    0.0011,    0.0011,    0.0010,    0.0010,    0.0009,    0.0008,    0.0007,    0.0005};
  float Acc_filters(float xin)
{
    static float sx = 0;
    float xout = 0;
    sx = alpha*sx + (1 - alpha) * xin;
   //sx = xin;
    if(N - 1 > g_point)
    {
        filterx[g_point] = sx;
        g_point ++;
    }
    else 
    {
        int i =1;
        for(i = 0; i < 79; i++)
        {
            filterx[i] = filterx[i+1];
        }
        i = 79;
        filterx[i] = sx;
        
        for(i = 0; i < 80; i ++)
        {
            xout += filterb[i]*filterx[i];
        }
        return xout;
    }
    return xin;
}