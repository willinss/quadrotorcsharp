###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.10.1.52143/W32 for ARM     28/Apr/2012  19:46:13 #
# Copyright 1999-2010 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  C:\Documents and Settings\Administrator\iar\Myproject\42 #
#                    8IIC\src\Sources\C\Component_C\Balance_Kalman.c          #
#    Command line =  "C:\Documents and Settings\Administrator\iar\Myproject\4 #
#                    28IIC\src\Sources\C\Component_C\Balance_Kalman.c" -D     #
#                    IAR -D TWR_K60N512 -lCN "C:\Documents and                #
#                    Settings\Administrator\iar\Myproject\428IIC\bin\Ram\List #
#                    \" -lB "C:\Documents and Settings\Administrator\iar\Mypr #
#                    oject\428IIC\bin\Ram\List\" -o "C:\Documents and         #
#                    Settings\Administrator\iar\Myproject\428IIC\bin\Ram\Obj\ #
#                    " --no_cse --no_unroll --no_inline --no_code_motion      #
#                    --no_tbaa --no_clustering --no_scheduling --debug        #
#                    --endian=little --cpu=Cortex-M4 -e --fpu=None            #
#                    --dlib_config "D:\IAR Systems\Embedded Workbench         #
#                    6.0\arm\INC\c\DLib_Config_Normal.h" -I "C:\Documents     #
#                    and Settings\Administrator\iar\Myproject\428IIC\src\Sour #
#                    ces\H\" -I "C:\Documents and                             #
#                    Settings\Administrator\iar\Myproject\428IIC\src\Sources\ #
#                    H\Component_H\" -I "C:\Documents and                     #
#                    Settings\Administrator\iar\Myproject\428IIC\src\Sources\ #
#                    H\Frame_H\" -Ol --use_c++_inline                         #
#    List file    =  C:\Documents and Settings\Administrator\iar\Myproject\42 #
#                    8IIC\bin\Ram\List\Balance_Kalman.lst                     #
#    Object file  =  C:\Documents and Settings\Administrator\iar\Myproject\42 #
#                    8IIC\bin\Ram\Obj\Balance_Kalman.o                        #
#                                                                             #
#                                                                             #
###############################################################################

C:\Documents and Settings\Administrator\iar\Myproject\428IIC\src\Sources\C\Component_C\Balance_Kalman.c
      1          #include "pit.h"
      2          #include "Balance_Kalman.h"
      3          //*
      4          //-------------------------------------------------------
      5          //Kalman滤波，8MHz的处理时间约1.8ms；
      6          //-------------------------------------------------------

   \                                 In section .bss, align 4
      7          float angle, angle_dot; 		//外部需要引用的变量
   \                     angle:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     angle_dot:
   \   00000000                      DS8 4
      8          //-------------------------------------------------------

   \                                 In section .data, align 4
      9          float Q_angle=0.001, Q_gyro=0.003, R_angle=0.5, dt = 0.02;
   \                     Q_angle:
   \   00000000   6F12833A           DC32 3A83126FH

   \                                 In section .data, align 4
   \                     Q_gyro:
   \   00000000   A69B443B           DC32 3B449BA6H

   \                                 In section .data, align 4
   \                     R_angle:
   \   00000000   0000003F           DC32 3F000000H

   \                                 In section .data, align 4
   \                     dt:
   \   00000000   0AD7A33C           DC32 3CA3D70AH
     10          			//注意：dt的取值为kalman滤波器采样时间;

   \                                 In section .data, align 4
     11          float P[2][2] = {
   \                     P:
   \   00000000   0000803F0000       DC32 3F800000H, 0H, 0H, 3F800000H
   \              000000000000
   \              0000803F    
     12          							{ 1, 0 },
     13          							{ 0, 1 }
     14          						};
     15          	

   \                                 In section .bss, align 4
     16          float Pdot[4] ={0,0,0,0};
   \                     Pdot:
   \   00000000                      DS8 16
     17          

   \                                 In section .text, align 4, keep-with-next
     18          const char C_0 = 1;
   \                     C_0:
   \   00000000                      ; Initializer data, 1 bytes
   \   00000000   01                 DC8 1
     19          

   \                                 In section .bss, align 4
     20          float q_bias, angle_err, PCt_0, PCt_1, E, K_0, K_1, t_0, t_1;
   \                     q_bias:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     angle_err:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     PCt_0:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     PCt_1:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     E:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     K_0:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     K_1:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     t_0:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     t_1:
   \   00000000                      DS8 4
     21          //-------------------------------------------------------
     22          

   \                                 In section .text, align 2, keep-with-next
     23          float Kalman_Filter(float angle_m,float gyro_m)			//gyro_m:gyro_measure
     24          {
   \                     Kalman_Filter:
   \   00000000   30B5               PUSH     {R4,R5,LR}
   \   00000002   0400               MOVS     R4,R0
   \   00000004   0D00               MOVS     R5,R1
     25          	angle+=(gyro_m-q_bias) * dt;//先验估计
   \   00000006   2800               MOVS     R0,R5
   \   00000008   ........           LDR.W    R1,??DataTable3
   \   0000000C   0968               LDR      R1,[R1, #+0]
   \   0000000E   ........           BL       __aeabi_fsub
   \   00000012   ........           LDR.W    R1,??DataTable3_1
   \   00000016   0968               LDR      R1,[R1, #+0]
   \   00000018   ........           BL       __aeabi_fmul
   \   0000001C   ........           LDR.W    R1,??DataTable3_2
   \   00000020   0968               LDR      R1,[R1, #+0]
   \   00000022   ........           BL       __aeabi_fadd
   \   00000026   ........           LDR.W    R1,??DataTable3_2
   \   0000002A   0860               STR      R0,[R1, #+0]
     26          	
     27          	Pdot[0]=Q_angle - P[0][1] - P[1][0];// Pk-' 先验估计误差协方差的微分
   \   0000002C   ........           LDR.W    R0,??DataTable3_3
   \   00000030   0068               LDR      R0,[R0, #+0]
   \   00000032   ........           LDR.W    R1,??DataTable3_4
   \   00000036   4968               LDR      R1,[R1, #+4]
   \   00000038   ........           BL       __aeabi_fsub
   \   0000003C   ........           LDR.W    R1,??DataTable3_4
   \   00000040   8968               LDR      R1,[R1, #+8]
   \   00000042   ........           BL       __aeabi_fsub
   \   00000046   ........           LDR.W    R1,??DataTable3_5
   \   0000004A   0860               STR      R0,[R1, #+0]
     28          	Pdot[1]=- P[1][1];
   \   0000004C   ........           LDR.W    R0,??DataTable3_5
   \   00000050   ........           LDR.W    R1,??DataTable3_4
   \   00000054   C968               LDR      R1,[R1, #+12]
   \   00000056   91F00041           EORS     R1,R1,#0x80000000
   \   0000005A   4160               STR      R1,[R0, #+4]
     29          	Pdot[2]=- P[1][1];
   \   0000005C   ........           LDR.W    R0,??DataTable3_5
   \   00000060   ........           LDR.W    R1,??DataTable3_4
   \   00000064   C968               LDR      R1,[R1, #+12]
   \   00000066   91F00041           EORS     R1,R1,#0x80000000
   \   0000006A   8160               STR      R1,[R0, #+8]
     30          	Pdot[3]=Q_gyro;
   \   0000006C   ........           LDR.W    R0,??DataTable3_5
   \   00000070   ........           LDR.W    R1,??DataTable3_6
   \   00000074   0968               LDR      R1,[R1, #+0]
   \   00000076   C160               STR      R1,[R0, #+12]
     31          	
     32          	P[0][0] += Pdot[0] * dt;// Pk- 先验估计误差协方差微分的积分 = 先验估计误差协方差
   \   00000078   ........           LDR.W    R0,??DataTable3_5
   \   0000007C   0168               LDR      R1,[R0, #+0]
   \   0000007E   ........           LDR.W    R0,??DataTable3_1
   \   00000082   0068               LDR      R0,[R0, #+0]
   \   00000084   ........           BL       __aeabi_fmul
   \   00000088   ........           LDR.W    R1,??DataTable3_4
   \   0000008C   0968               LDR      R1,[R1, #+0]
   \   0000008E   ........           BL       __aeabi_fadd
   \   00000092   ........           LDR.W    R1,??DataTable3_4
   \   00000096   0860               STR      R0,[R1, #+0]
     33          	P[0][1] += Pdot[1] * dt;
   \   00000098   ........           LDR.W    R0,??DataTable3_5
   \   0000009C   4168               LDR      R1,[R0, #+4]
   \   0000009E   ........           LDR.W    R0,??DataTable3_1
   \   000000A2   0068               LDR      R0,[R0, #+0]
   \   000000A4   ........           BL       __aeabi_fmul
   \   000000A8   ........           LDR.W    R1,??DataTable3_4
   \   000000AC   4968               LDR      R1,[R1, #+4]
   \   000000AE   ........           BL       __aeabi_fadd
   \   000000B2   ........           LDR.W    R1,??DataTable3_4
   \   000000B6   4860               STR      R0,[R1, #+4]
     34          	P[1][0] += Pdot[2] * dt;
   \   000000B8   ........           LDR.W    R0,??DataTable3_5
   \   000000BC   8168               LDR      R1,[R0, #+8]
   \   000000BE   ........           LDR.W    R0,??DataTable3_1
   \   000000C2   0068               LDR      R0,[R0, #+0]
   \   000000C4   ........           BL       __aeabi_fmul
   \   000000C8   ........           LDR.W    R1,??DataTable3_4
   \   000000CC   8968               LDR      R1,[R1, #+8]
   \   000000CE   ........           BL       __aeabi_fadd
   \   000000D2   ........           LDR.W    R1,??DataTable3_4
   \   000000D6   8860               STR      R0,[R1, #+8]
     35          	P[1][1] += Pdot[3] * dt;
   \   000000D8   ........           LDR.W    R0,??DataTable3_5
   \   000000DC   C168               LDR      R1,[R0, #+12]
   \   000000DE   ........           LDR.W    R0,??DataTable3_1
   \   000000E2   0068               LDR      R0,[R0, #+0]
   \   000000E4   ........           BL       __aeabi_fmul
   \   000000E8   ........           LDR.W    R1,??DataTable3_4
   \   000000EC   C968               LDR      R1,[R1, #+12]
   \   000000EE   ........           BL       __aeabi_fadd
   \   000000F2   ........           LDR.W    R1,??DataTable3_4
   \   000000F6   C860               STR      R0,[R1, #+12]
     36          	
     37          	
     38          	angle_err = angle_m - angle;//zk-先验估计
   \   000000F8   2000               MOVS     R0,R4
   \   000000FA   ........           LDR.W    R1,??DataTable3_2
   \   000000FE   0968               LDR      R1,[R1, #+0]
   \   00000100   ........           BL       __aeabi_fsub
   \   00000104   ........           LDR.W    R1,??DataTable3_7
   \   00000108   0860               STR      R0,[R1, #+0]
     39          	
     40          	
     41          	PCt_0 = C_0 * P[0][0];
   \   0000010A   ........           ADR.W    R0,C_0
   \   0000010E   0078               LDRB     R0,[R0, #+0]
   \   00000110   ........           BL       __aeabi_ui2f
   \   00000114   ........           LDR.W    R1,??DataTable3_4
   \   00000118   0968               LDR      R1,[R1, #+0]
   \   0000011A   ........           BL       __aeabi_fmul
   \   0000011E   ........           LDR.W    R1,??DataTable3_8
   \   00000122   0860               STR      R0,[R1, #+0]
     42          	PCt_1 = C_0 * P[1][0];
   \   00000124   ........           ADR.W    R0,C_0
   \   00000128   0078               LDRB     R0,[R0, #+0]
   \   0000012A   ........           BL       __aeabi_ui2f
   \   0000012E   ........           LDR.W    R1,??DataTable3_4
   \   00000132   8968               LDR      R1,[R1, #+8]
   \   00000134   ........           BL       __aeabi_fmul
   \   00000138   ........           LDR.W    R1,??DataTable3_9
   \   0000013C   0860               STR      R0,[R1, #+0]
     43          	
     44          	E = R_angle + C_0 * PCt_0;
   \   0000013E   ........           ADR.W    R0,C_0
   \   00000142   0078               LDRB     R0,[R0, #+0]
   \   00000144   ........           BL       __aeabi_ui2f
   \   00000148   ........           LDR.W    R1,??DataTable3_8
   \   0000014C   0968               LDR      R1,[R1, #+0]
   \   0000014E   ........           BL       __aeabi_fmul
   \   00000152   ........           LDR.W    R1,??DataTable3_10
   \   00000156   0968               LDR      R1,[R1, #+0]
   \   00000158   ........           BL       __aeabi_fadd
   \   0000015C   ........           LDR.W    R1,??DataTable3_11
   \   00000160   0860               STR      R0,[R1, #+0]
     45          	
     46          	K_0 = PCt_0 / E;//Kk
   \   00000162   ........           LDR.W    R0,??DataTable3_8
   \   00000166   0068               LDR      R0,[R0, #+0]
   \   00000168   ........           LDR.W    R1,??DataTable3_11
   \   0000016C   0968               LDR      R1,[R1, #+0]
   \   0000016E   ........           BL       __aeabi_fdiv
   \   00000172   ........           LDR.W    R1,??DataTable3_12
   \   00000176   0860               STR      R0,[R1, #+0]
     47          	K_1 = PCt_1 / E;
   \   00000178   ....               LDR.N    R0,??DataTable3_9
   \   0000017A   0068               LDR      R0,[R0, #+0]
   \   0000017C   ....               LDR.N    R1,??DataTable3_11
   \   0000017E   0968               LDR      R1,[R1, #+0]
   \   00000180   ........           BL       __aeabi_fdiv
   \   00000184   ....               LDR.N    R1,??DataTable3_13
   \   00000186   0860               STR      R0,[R1, #+0]
     48          	
     49          	t_0 = PCt_0;
   \   00000188   ....               LDR.N    R0,??DataTable3_14
   \   0000018A   ....               LDR.N    R1,??DataTable3_8
   \   0000018C   0968               LDR      R1,[R1, #+0]
   \   0000018E   0160               STR      R1,[R0, #+0]
     50          	t_1 = C_0 * P[0][1];
   \   00000190   ........           ADR.W    R0,C_0
   \   00000194   0078               LDRB     R0,[R0, #+0]
   \   00000196   ........           BL       __aeabi_ui2f
   \   0000019A   ....               LDR.N    R1,??DataTable3_4
   \   0000019C   4968               LDR      R1,[R1, #+4]
   \   0000019E   ........           BL       __aeabi_fmul
   \   000001A2   ....               LDR.N    R1,??DataTable3_15
   \   000001A4   0860               STR      R0,[R1, #+0]
     51          
     52          	P[0][0] -= K_0 * t_0;//后验估计误差协方差
   \   000001A6   ....               LDR.N    R0,??DataTable3_12
   \   000001A8   0168               LDR      R1,[R0, #+0]
   \   000001AA   ....               LDR.N    R0,??DataTable3_14
   \   000001AC   0068               LDR      R0,[R0, #+0]
   \   000001AE   ........           BL       __aeabi_fmul
   \   000001B2   0100               MOVS     R1,R0
   \   000001B4   ....               LDR.N    R0,??DataTable3_4
   \   000001B6   0068               LDR      R0,[R0, #+0]
   \   000001B8   ........           BL       __aeabi_fsub
   \   000001BC   ....               LDR.N    R1,??DataTable3_4
   \   000001BE   0860               STR      R0,[R1, #+0]
     53          	P[0][1] -= K_0 * t_1;
   \   000001C0   ....               LDR.N    R0,??DataTable3_12
   \   000001C2   0168               LDR      R1,[R0, #+0]
   \   000001C4   ....               LDR.N    R0,??DataTable3_15
   \   000001C6   0068               LDR      R0,[R0, #+0]
   \   000001C8   ........           BL       __aeabi_fmul
   \   000001CC   0100               MOVS     R1,R0
   \   000001CE   ....               LDR.N    R0,??DataTable3_4
   \   000001D0   4068               LDR      R0,[R0, #+4]
   \   000001D2   ........           BL       __aeabi_fsub
   \   000001D6   ....               LDR.N    R1,??DataTable3_4
   \   000001D8   4860               STR      R0,[R1, #+4]
     54          	P[1][0] -= K_1 * t_0;
   \   000001DA   ....               LDR.N    R0,??DataTable3_13
   \   000001DC   0168               LDR      R1,[R0, #+0]
   \   000001DE   ....               LDR.N    R0,??DataTable3_14
   \   000001E0   0068               LDR      R0,[R0, #+0]
   \   000001E2   ........           BL       __aeabi_fmul
   \   000001E6   0100               MOVS     R1,R0
   \   000001E8   ....               LDR.N    R0,??DataTable3_4
   \   000001EA   8068               LDR      R0,[R0, #+8]
   \   000001EC   ........           BL       __aeabi_fsub
   \   000001F0   ....               LDR.N    R1,??DataTable3_4
   \   000001F2   8860               STR      R0,[R1, #+8]
     55          	P[1][1] -= K_1 * t_1;
   \   000001F4   ....               LDR.N    R0,??DataTable3_13
   \   000001F6   0168               LDR      R1,[R0, #+0]
   \   000001F8   ....               LDR.N    R0,??DataTable3_15
   \   000001FA   0068               LDR      R0,[R0, #+0]
   \   000001FC   ........           BL       __aeabi_fmul
   \   00000200   0100               MOVS     R1,R0
   \   00000202   ....               LDR.N    R0,??DataTable3_4
   \   00000204   C068               LDR      R0,[R0, #+12]
   \   00000206   ........           BL       __aeabi_fsub
   \   0000020A   ....               LDR.N    R1,??DataTable3_4
   \   0000020C   C860               STR      R0,[R1, #+12]
     56          	
     57          	
     58          	angle	+= K_0 * angle_err;//后验估计
   \   0000020E   ....               LDR.N    R0,??DataTable3_12
   \   00000210   0168               LDR      R1,[R0, #+0]
   \   00000212   ....               LDR.N    R0,??DataTable3_7
   \   00000214   0068               LDR      R0,[R0, #+0]
   \   00000216   ........           BL       __aeabi_fmul
   \   0000021A   ....               LDR.N    R1,??DataTable3_2
   \   0000021C   0968               LDR      R1,[R1, #+0]
   \   0000021E   ........           BL       __aeabi_fadd
   \   00000222   ....               LDR.N    R1,??DataTable3_2
   \   00000224   0860               STR      R0,[R1, #+0]
     59          	q_bias	+= K_1 * angle_err;//后验估计
   \   00000226   ....               LDR.N    R0,??DataTable3_13
   \   00000228   0168               LDR      R1,[R0, #+0]
   \   0000022A   ....               LDR.N    R0,??DataTable3_7
   \   0000022C   0068               LDR      R0,[R0, #+0]
   \   0000022E   ........           BL       __aeabi_fmul
   \   00000232   ....               LDR.N    R1,??DataTable3
   \   00000234   0968               LDR      R1,[R1, #+0]
   \   00000236   ........           BL       __aeabi_fadd
   \   0000023A   ....               LDR.N    R1,??DataTable3
   \   0000023C   0860               STR      R0,[R1, #+0]
     60          	angle_dot = gyro_m-q_bias;//输出值（后验估计）的微分 = 角速度
   \   0000023E   2800               MOVS     R0,R5
   \   00000240   ....               LDR.N    R1,??DataTable3
   \   00000242   0968               LDR      R1,[R1, #+0]
   \   00000244   ........           BL       __aeabi_fsub
   \   00000248   ....               LDR.N    R1,??DataTable3_16
   \   0000024A   0860               STR      R0,[R1, #+0]
     61                  return angle;
   \   0000024C   ....               LDR.N    R0,??DataTable3_2
   \   0000024E   0068               LDR      R0,[R0, #+0]
   \   00000250   30BD               POP      {R4,R5,PC}       ;; return
     62          }
     63          
     64          
     65          
     66          

   \                                 In section .bss, align 4
     67          float angle1, angle_dot1; 		//外部需要引用的变量
   \                     angle1:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     angle_dot1:
   \   00000000                      DS8 4
     68          //-------------------------------------------------------

   \                                 In section .data, align 4
     69          float Q_angle1=0.001, Q_gyro1=0.003, R_angle1=0.5, dt1 = 0.02;
   \                     Q_angle1:
   \   00000000   6F12833A           DC32 3A83126FH

   \                                 In section .data, align 4
   \                     Q_gyro1:
   \   00000000   A69B443B           DC32 3B449BA6H

   \                                 In section .data, align 4
   \                     R_angle1:
   \   00000000   0000003F           DC32 3F000000H

   \                                 In section .data, align 4
   \                     dt1:
   \   00000000   0AD7A33C           DC32 3CA3D70AH
     70          			//注意：dt的取值为kalman滤波器采样时间;

   \                                 In section .data, align 4
     71          float P1[2][2] = {
   \                     `P1`:
   \   00000000   0000803F0000       DC32 3F800000H, 0H, 0H, 3F800000H
   \              000000000000
   \              0000803F    
     72          							{ 1, 0 },
     73          							{ 0, 1 }
     74          						};
     75          	

   \                                 In section .bss, align 4
     76          float Pdot1[4] ={0,0,0,0};
   \                     Pdot1:
   \   00000000                      DS8 16
     77          

   \                                 In section .text, align 4, keep-with-next
     78          const char C_01 = 1;
   \                     C_01:
   \   00000000                      ; Initializer data, 1 bytes
   \   00000000   01                 DC8 1
     79          

   \                                 In section .bss, align 4
     80          float q_bias1, angle_err1, PCt_01, PCt_11, E1, K_01, K_11, t_01, t_11;
   \                     q_bias1:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     angle_err1:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     PCt_01:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     PCt_11:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     E1:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     K_01:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     K_11:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     t_01:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     t_11:
   \   00000000                      DS8 4
     81          //-------------------------------------------------------
     82          

   \                                 In section .text, align 2, keep-with-next
     83          float Kalman_Filter1(float angle_m1,float gyro_m1)			//gyro_m:gyro_measure
     84          {
   \                     Kalman_Filter1:
   \   00000000   30B5               PUSH     {R4,R5,LR}
   \   00000002   0400               MOVS     R4,R0
   \   00000004   0D00               MOVS     R5,R1
     85          	angle1+=(gyro_m1-q_bias1) * dt1;//先验估计
   \   00000006   2800               MOVS     R0,R5
   \   00000008   ....               LDR.N    R1,??DataTable3_17
   \   0000000A   0968               LDR      R1,[R1, #+0]
   \   0000000C   ........           BL       __aeabi_fsub
   \   00000010   ....               LDR.N    R1,??DataTable3_18
   \   00000012   0968               LDR      R1,[R1, #+0]
   \   00000014   ........           BL       __aeabi_fmul
   \   00000018   ....               LDR.N    R1,??DataTable3_19
   \   0000001A   0968               LDR      R1,[R1, #+0]
   \   0000001C   ........           BL       __aeabi_fadd
   \   00000020   ....               LDR.N    R1,??DataTable3_19
   \   00000022   0860               STR      R0,[R1, #+0]
     86          	
     87          	Pdot1[0]=Q_angle1 - P1[0][1] - P1[1][0];// Pk-' 先验估计误差协方差的微分
   \   00000024   ....               LDR.N    R0,??DataTable3_20
   \   00000026   0068               LDR      R0,[R0, #+0]
   \   00000028   ....               LDR.N    R1,??DataTable3_21
   \   0000002A   4968               LDR      R1,[R1, #+4]
   \   0000002C   ........           BL       __aeabi_fsub
   \   00000030   ....               LDR.N    R1,??DataTable3_21
   \   00000032   8968               LDR      R1,[R1, #+8]
   \   00000034   ........           BL       __aeabi_fsub
   \   00000038   ....               LDR.N    R1,??DataTable3_22
   \   0000003A   0860               STR      R0,[R1, #+0]
     88          	Pdot1[1]=- P1[1][1];
   \   0000003C   ....               LDR.N    R0,??DataTable3_22
   \   0000003E   ....               LDR.N    R1,??DataTable3_21
   \   00000040   C968               LDR      R1,[R1, #+12]
   \   00000042   91F00041           EORS     R1,R1,#0x80000000
   \   00000046   4160               STR      R1,[R0, #+4]
     89          	Pdot1[2]=- P1[1][1];
   \   00000048   ....               LDR.N    R0,??DataTable3_22
   \   0000004A   ....               LDR.N    R1,??DataTable3_21
   \   0000004C   C968               LDR      R1,[R1, #+12]
   \   0000004E   91F00041           EORS     R1,R1,#0x80000000
   \   00000052   8160               STR      R1,[R0, #+8]
     90          	Pdot1[3]=Q_gyro1;
   \   00000054   ....               LDR.N    R0,??DataTable3_22
   \   00000056   ....               LDR.N    R1,??DataTable3_23
   \   00000058   0968               LDR      R1,[R1, #+0]
   \   0000005A   C160               STR      R1,[R0, #+12]
     91          	
     92          	P1[0][0] += Pdot1[0] * dt1;// Pk- 先验估计误差协方差微分的积分 = 先验估计误差协方差
   \   0000005C   ....               LDR.N    R0,??DataTable3_22
   \   0000005E   0168               LDR      R1,[R0, #+0]
   \   00000060   ....               LDR.N    R0,??DataTable3_18
   \   00000062   0068               LDR      R0,[R0, #+0]
   \   00000064   ........           BL       __aeabi_fmul
   \   00000068   ....               LDR.N    R1,??DataTable3_21
   \   0000006A   0968               LDR      R1,[R1, #+0]
   \   0000006C   ........           BL       __aeabi_fadd
   \   00000070   ....               LDR.N    R1,??DataTable3_21
   \   00000072   0860               STR      R0,[R1, #+0]
     93          	P1[0][1] += Pdot1[1] * dt1;
   \   00000074   ....               LDR.N    R0,??DataTable3_22
   \   00000076   4168               LDR      R1,[R0, #+4]
   \   00000078   ....               LDR.N    R0,??DataTable3_18
   \   0000007A   0068               LDR      R0,[R0, #+0]
   \   0000007C   ........           BL       __aeabi_fmul
   \   00000080   ....               LDR.N    R1,??DataTable3_21
   \   00000082   4968               LDR      R1,[R1, #+4]
   \   00000084   ........           BL       __aeabi_fadd
   \   00000088   ....               LDR.N    R1,??DataTable3_21
   \   0000008A   4860               STR      R0,[R1, #+4]
     94          	P1[1][0] += Pdot1[2] * dt1;
   \   0000008C   ....               LDR.N    R0,??DataTable3_22
   \   0000008E   8168               LDR      R1,[R0, #+8]
   \   00000090   ....               LDR.N    R0,??DataTable3_18
   \   00000092   0068               LDR      R0,[R0, #+0]
   \   00000094   ........           BL       __aeabi_fmul
   \   00000098   ....               LDR.N    R1,??DataTable3_21
   \   0000009A   8968               LDR      R1,[R1, #+8]
   \   0000009C   ........           BL       __aeabi_fadd
   \   000000A0   ....               LDR.N    R1,??DataTable3_21
   \   000000A2   8860               STR      R0,[R1, #+8]
     95          	P1[1][1] += Pdot1[3] * dt1;
   \   000000A4   ....               LDR.N    R0,??DataTable3_22
   \   000000A6   C168               LDR      R1,[R0, #+12]
   \   000000A8   ....               LDR.N    R0,??DataTable3_18
   \   000000AA   0068               LDR      R0,[R0, #+0]
   \   000000AC   ........           BL       __aeabi_fmul
   \   000000B0   ....               LDR.N    R1,??DataTable3_21
   \   000000B2   C968               LDR      R1,[R1, #+12]
   \   000000B4   ........           BL       __aeabi_fadd
   \   000000B8   ....               LDR.N    R1,??DataTable3_21
   \   000000BA   C860               STR      R0,[R1, #+12]
     96          	
     97          	
     98          	angle_err1 = angle_m1 - angle1;//zk-先验估计
   \   000000BC   2000               MOVS     R0,R4
   \   000000BE   ....               LDR.N    R1,??DataTable3_19
   \   000000C0   0968               LDR      R1,[R1, #+0]
   \   000000C2   ........           BL       __aeabi_fsub
   \   000000C6   ....               LDR.N    R1,??DataTable3_24
   \   000000C8   0860               STR      R0,[R1, #+0]
     99          	
    100          	
    101          	PCt_01 = C_01 * P1[0][0];
   \   000000CA   ........           ADR.W    R0,C_01
   \   000000CE   0078               LDRB     R0,[R0, #+0]
   \   000000D0   ........           BL       __aeabi_ui2f
   \   000000D4   ....               LDR.N    R1,??DataTable3_21
   \   000000D6   0968               LDR      R1,[R1, #+0]
   \   000000D8   ........           BL       __aeabi_fmul
   \   000000DC   ....               LDR.N    R1,??DataTable3_25
   \   000000DE   0860               STR      R0,[R1, #+0]
    102          	PCt_11 = C_01 * P1[1][0];
   \   000000E0   ........           ADR.W    R0,C_01
   \   000000E4   0078               LDRB     R0,[R0, #+0]
   \   000000E6   ........           BL       __aeabi_ui2f
   \   000000EA   ....               LDR.N    R1,??DataTable3_21
   \   000000EC   8968               LDR      R1,[R1, #+8]
   \   000000EE   ........           BL       __aeabi_fmul
   \   000000F2   ....               LDR.N    R1,??DataTable3_26
   \   000000F4   0860               STR      R0,[R1, #+0]
    103          	
    104          	E1 = R_angle1 + C_01 * PCt_01;
   \   000000F6   ........           ADR.W    R0,C_01
   \   000000FA   0078               LDRB     R0,[R0, #+0]
   \   000000FC   ........           BL       __aeabi_ui2f
   \   00000100   ....               LDR.N    R1,??DataTable3_25
   \   00000102   0968               LDR      R1,[R1, #+0]
   \   00000104   ........           BL       __aeabi_fmul
   \   00000108   ....               LDR.N    R1,??DataTable3_27
   \   0000010A   0968               LDR      R1,[R1, #+0]
   \   0000010C   ........           BL       __aeabi_fadd
   \   00000110   ....               LDR.N    R1,??DataTable3_28
   \   00000112   0860               STR      R0,[R1, #+0]
    105          	
    106          	K_01 = PCt_01 / E1;//Kk
   \   00000114   ....               LDR.N    R0,??DataTable3_25
   \   00000116   0068               LDR      R0,[R0, #+0]
   \   00000118   ....               LDR.N    R1,??DataTable3_28
   \   0000011A   0968               LDR      R1,[R1, #+0]
   \   0000011C   ........           BL       __aeabi_fdiv
   \   00000120   ....               LDR.N    R1,??DataTable3_29
   \   00000122   0860               STR      R0,[R1, #+0]
    107          	K_11 = PCt_11 / E1;
   \   00000124   ....               LDR.N    R0,??DataTable3_26
   \   00000126   0068               LDR      R0,[R0, #+0]
   \   00000128   ....               LDR.N    R1,??DataTable3_28
   \   0000012A   0968               LDR      R1,[R1, #+0]
   \   0000012C   ........           BL       __aeabi_fdiv
   \   00000130   ....               LDR.N    R1,??DataTable3_30
   \   00000132   0860               STR      R0,[R1, #+0]
    108          	
    109          	t_01 = PCt_01;
   \   00000134   ....               LDR.N    R0,??DataTable3_31
   \   00000136   ....               LDR.N    R1,??DataTable3_25
   \   00000138   0968               LDR      R1,[R1, #+0]
   \   0000013A   0160               STR      R1,[R0, #+0]
    110          	t_11 = C_01 * P1[0][1];
   \   0000013C   ........           ADR.W    R0,C_01
   \   00000140   0078               LDRB     R0,[R0, #+0]
   \   00000142   ........           BL       __aeabi_ui2f
   \   00000146   ....               LDR.N    R1,??DataTable3_21
   \   00000148   4968               LDR      R1,[R1, #+4]
   \   0000014A   ........           BL       __aeabi_fmul
   \   0000014E   ....               LDR.N    R1,??DataTable3_32
   \   00000150   0860               STR      R0,[R1, #+0]
    111          
    112          	P1[0][0] -= K_01 * t_01;//后验估计误差协方差
   \   00000152   ....               LDR.N    R0,??DataTable3_29
   \   00000154   0168               LDR      R1,[R0, #+0]
   \   00000156   ....               LDR.N    R0,??DataTable3_31
   \   00000158   0068               LDR      R0,[R0, #+0]
   \   0000015A   ........           BL       __aeabi_fmul
   \   0000015E   0100               MOVS     R1,R0
   \   00000160   ....               LDR.N    R0,??DataTable3_21
   \   00000162   0068               LDR      R0,[R0, #+0]
   \   00000164   ........           BL       __aeabi_fsub
   \   00000168   ....               LDR.N    R1,??DataTable3_21
   \   0000016A   0860               STR      R0,[R1, #+0]
    113          	P1[0][1] -= K_01 * t_11;
   \   0000016C   ....               LDR.N    R0,??DataTable3_29
   \   0000016E   0168               LDR      R1,[R0, #+0]
   \   00000170   ....               LDR.N    R0,??DataTable3_32
   \   00000172   0068               LDR      R0,[R0, #+0]
   \   00000174   ........           BL       __aeabi_fmul
   \   00000178   0100               MOVS     R1,R0
   \   0000017A   ....               LDR.N    R0,??DataTable3_21
   \   0000017C   4068               LDR      R0,[R0, #+4]
   \   0000017E   ........           BL       __aeabi_fsub
   \   00000182   ....               LDR.N    R1,??DataTable3_21
   \   00000184   4860               STR      R0,[R1, #+4]
    114          	P1[1][0] -= K_11 * t_01;
   \   00000186   ....               LDR.N    R0,??DataTable3_30
   \   00000188   0168               LDR      R1,[R0, #+0]
   \   0000018A   ....               LDR.N    R0,??DataTable3_31
   \   0000018C   0068               LDR      R0,[R0, #+0]
   \   0000018E   ........           BL       __aeabi_fmul
   \   00000192   0100               MOVS     R1,R0
   \   00000194   ....               LDR.N    R0,??DataTable3_21
   \   00000196   8068               LDR      R0,[R0, #+8]
   \   00000198   ........           BL       __aeabi_fsub
   \   0000019C   ....               LDR.N    R1,??DataTable3_21
   \   0000019E   8860               STR      R0,[R1, #+8]
    115          	P1[1][1] -= K_11 * t_11;
   \   000001A0   ....               LDR.N    R0,??DataTable3_30
   \   000001A2   0168               LDR      R1,[R0, #+0]
   \   000001A4   ....               LDR.N    R0,??DataTable3_32
   \   000001A6   0068               LDR      R0,[R0, #+0]
   \   000001A8   ........           BL       __aeabi_fmul
   \   000001AC   0100               MOVS     R1,R0
   \   000001AE   ....               LDR.N    R0,??DataTable3_21
   \   000001B0   C068               LDR      R0,[R0, #+12]
   \   000001B2   ........           BL       __aeabi_fsub
   \   000001B6   ....               LDR.N    R1,??DataTable3_21
   \   000001B8   C860               STR      R0,[R1, #+12]
    116          	
    117          	
    118          	angle1	+= K_01 * angle_err1;//后验估计
   \   000001BA   ....               LDR.N    R0,??DataTable3_29
   \   000001BC   0168               LDR      R1,[R0, #+0]
   \   000001BE   ....               LDR.N    R0,??DataTable3_24
   \   000001C0   0068               LDR      R0,[R0, #+0]
   \   000001C2   ........           BL       __aeabi_fmul
   \   000001C6   ....               LDR.N    R1,??DataTable3_19
   \   000001C8   0968               LDR      R1,[R1, #+0]
   \   000001CA   ........           BL       __aeabi_fadd
   \   000001CE   ....               LDR.N    R1,??DataTable3_19
   \   000001D0   0860               STR      R0,[R1, #+0]
    119          	q_bias1	+= K_11 * angle_err1;//后验估计
   \   000001D2   ....               LDR.N    R0,??DataTable3_30
   \   000001D4   0168               LDR      R1,[R0, #+0]
   \   000001D6   ....               LDR.N    R0,??DataTable3_24
   \   000001D8   0068               LDR      R0,[R0, #+0]
   \   000001DA   ........           BL       __aeabi_fmul
   \   000001DE   ....               LDR.N    R1,??DataTable3_17
   \   000001E0   0968               LDR      R1,[R1, #+0]
   \   000001E2   ........           BL       __aeabi_fadd
   \   000001E6   ....               LDR.N    R1,??DataTable3_17
   \   000001E8   0860               STR      R0,[R1, #+0]
    120          	angle_dot1 = gyro_m1-q_bias1;//输出值（后验估计）的微分 = 角速度
   \   000001EA   2800               MOVS     R0,R5
   \   000001EC   ....               LDR.N    R1,??DataTable3_17
   \   000001EE   0968               LDR      R1,[R1, #+0]
   \   000001F0   ........           BL       __aeabi_fsub
   \   000001F4   ....               LDR.N    R1,??DataTable3_33
   \   000001F6   0860               STR      R0,[R1, #+0]
    121                  return angle1;
   \   000001F8   ....               LDR.N    R0,??DataTable3_19
   \   000001FA   0068               LDR      R0,[R0, #+0]
   \   000001FC   30BD               POP      {R4,R5,PC}       ;; return
    122          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3:
   \   00000000   ........           DC32     q_bias

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_1:
   \   00000000   ........           DC32     dt

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_2:
   \   00000000   ........           DC32     angle

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_3:
   \   00000000   ........           DC32     Q_angle

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_4:
   \   00000000   ........           DC32     P

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_5:
   \   00000000   ........           DC32     Pdot

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_6:
   \   00000000   ........           DC32     Q_gyro

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_7:
   \   00000000   ........           DC32     angle_err

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_8:
   \   00000000   ........           DC32     PCt_0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_9:
   \   00000000   ........           DC32     PCt_1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_10:
   \   00000000   ........           DC32     R_angle

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_11:
   \   00000000   ........           DC32     E

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_12:
   \   00000000   ........           DC32     K_0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_13:
   \   00000000   ........           DC32     K_1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_14:
   \   00000000   ........           DC32     t_0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_15:
   \   00000000   ........           DC32     t_1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_16:
   \   00000000   ........           DC32     angle_dot

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_17:
   \   00000000   ........           DC32     q_bias1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_18:
   \   00000000   ........           DC32     dt1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_19:
   \   00000000   ........           DC32     angle1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_20:
   \   00000000   ........           DC32     Q_angle1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_21:
   \   00000000   ........           DC32     `P1`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_22:
   \   00000000   ........           DC32     Pdot1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_23:
   \   00000000   ........           DC32     Q_gyro1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_24:
   \   00000000   ........           DC32     angle_err1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_25:
   \   00000000   ........           DC32     PCt_01

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_26:
   \   00000000   ........           DC32     PCt_11

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_27:
   \   00000000   ........           DC32     R_angle1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_28:
   \   00000000   ........           DC32     E1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_29:
   \   00000000   ........           DC32     K_01

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_30:
   \   00000000   ........           DC32     K_11

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_31:
   \   00000000   ........           DC32     t_01

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_32:
   \   00000000   ........           DC32     t_11

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_33:
   \   00000000   ........           DC32     angle_dot1

   Maximum stack usage in bytes:

     Function       .cstack
     --------       -------
     Kalman_Filter      12
     Kalman_Filter1     12


   Section sizes:

     Function/Label  Bytes
     --------------  -----
     angle              4
     angle_dot          4
     Q_angle            4
     Q_gyro             4
     R_angle            4
     dt                 4
     P                 16
     Pdot              16
     C_0                1
     q_bias             4
     angle_err          4
     PCt_0              4
     PCt_1              4
     E                  4
     K_0                4
     K_1                4
     t_0                4
     t_1                4
     Kalman_Filter    594
     angle1             4
     angle_dot1         4
     Q_angle1           4
     Q_gyro1            4
     R_angle1           4
     dt1                4
     P1                16
     Pdot1             16
     C_01               1
     q_bias1            4
     angle_err1         4
     PCt_01             4
     PCt_11             4
     E1                 4
     K_01               4
     K_11               4
     t_01               4
     t_11               4
     Kalman_Filter1   510
     ??DataTable3       4
     ??DataTable3_1     4
     ??DataTable3_2     4
     ??DataTable3_3     4
     ??DataTable3_4     4
     ??DataTable3_5     4
     ??DataTable3_6     4
     ??DataTable3_7     4
     ??DataTable3_8     4
     ??DataTable3_9     4
     ??DataTable3_10    4
     ??DataTable3_11    4
     ??DataTable3_12    4
     ??DataTable3_13    4
     ??DataTable3_14    4
     ??DataTable3_15    4
     ??DataTable3_16    4
     ??DataTable3_17    4
     ??DataTable3_18    4
     ??DataTable3_19    4
     ??DataTable3_20    4
     ??DataTable3_21    4
     ??DataTable3_22    4
     ??DataTable3_23    4
     ??DataTable3_24    4
     ??DataTable3_25    4
     ??DataTable3_26    4
     ??DataTable3_27    4
     ??DataTable3_28    4
     ??DataTable3_29    4
     ??DataTable3_30    4
     ??DataTable3_31    4
     ??DataTable3_32    4
     ??DataTable3_33    4

 
   120 bytes in section .bss
    64 bytes in section .data
 1 242 bytes in section .text
 
 1 242 bytes of CODE memory
   184 bytes of DATA memory

Errors: none
Warnings: none
